{
  "profileId": "global-defaults",
  "name": "Global Defaults",
  "description": "Base threshold values applicable to all engine types. Child profiles inherit these values and can override specific thresholds.",
  "parent": null,
  "engineFamily": null,
  "fuelType": null,
  "application": null,
  "version": "1.0.2",
  "status": "active",
  "createdAt": "2026-01-13T00:00:00Z",
  "lastModified": "2026-01-16T20:03:22.238Z",
  "modifiedBy": "system",
  "thresholds": {
    "battery": {
      "enabled": false,
      "description": "Battery/system voltage monitoring",
      "unit": "V",
      "ignoreWhen": [
        {
          "param": "Vsw",
          "operator": "<",
          "value": 8
        },
        {
          "param": "rpm",
          "operator": "<",
          "value": 500
        }
      ],
      "critical": {
        "min": 9,
        "max": 32
      },
      "warning": {
        "min": 9.5,
        "max": 30
      },
      "hysteresis": {
        "lowClear": 9,
        "highClear": 29
      }
    },
    "coolantTemp": {
      "enabled": true,
      "description": "Engine coolant temperature monitoring",
      "unit": "째F",
      "critical": {
        "max": 235
      },
      "warning": {
        "max": 220
      },
      "gracePeriod": 60,
      "gracePeriodDescription": "Ignore during warmup (seconds)"
    },
    "oilPressure": {
      "enabled": true,
      "description": "Engine oil pressure monitoring",
      "unit": "psi",
      "critical": {
        "min": 6
      },
      "warning": {
        "min": 8
      },
      "rpmDependent": true,
      "rpmThresholdDescription": "Only check when RPM above this value",
      "ignoreWhen": [
        {
          "param": "Vsw",
          "operator": "<",
          "value": 8
        }
      ],
      "requireWhen": [
        {
          "param": "spark_shutoff_chk",
          "operator": "==",
          "value": 0
        }
      ],
      "rpmThreshold": 725
    },
    "manifoldPressure": {
      "enabled": true,
      "description": "Intake manifold absolute pressure",
      "unit": "psia",
      "critical": {
        "min": 0.5,
        "max": 40
      },
      "warning": {
        "min": 2,
        "max": 35
      }
    },
    "rpm": {
      "enabled": true,
      "description": "Engine speed monitoring",
      "unit": "RPM",
      "warning": {
        "max": 3200
      },
      "critical": {
        "max": 3500
      },
      "overspeed": 3800
    },
    "fuelTrim": {
      "enabled": true,
      "description": "Fuel trim / mixture control monitoring",
      "unit": "%",
      "closedLoop": {
        "warning": {
          "min": -25,
          "max": 25
        },
        "critical": {
          "min": -35,
          "max": 35
        }
      },
      "adaptive": {
        "warning": {
          "min": -20,
          "max": 20
        },
        "critical": {
          "min": -30,
          "max": 30
        }
      }
    },
    "knock": {
      "enabled": true,
      "description": "Engine knock/detonation detection",
      "maxRetard": {
        "warning": 10,
        "critical": 15
      },
      "percentageThreshold": {
        "warning": 5,
        "critical": 10
      },
      "percentageDescription": "Percentage of run time with knock activity"
    },
    "oilTemp": {
      "enabled": true,
      "description": "Engine oil temperature monitoring",
      "unit": "째F",
      "warning": {
        "max": 250
      },
      "critical": {
        "max": 270
      }
    },
    "intakeAirTemp": {
      "enabled": true,
      "description": "Intake air temperature monitoring",
      "unit": "째F",
      "warning": {
        "max": 140
      },
      "critical": {
        "max": 160
      }
    },
    "exhaustGasTemp": {
      "enabled": false,
      "description": "Exhaust gas temperature (when equipped)",
      "unit": "째F",
      "warning": {
        "max": 1400
      },
      "critical": {
        "max": 1600
      }
    }
  },
  "anomalyRules": [
    {
      "id": "dtc-active",
      "name": "Active Diagnostic Trouble Code",
      "description": "Malfunction indicator lamp is active while engine running",
      "enabled": true,
      "conditions": [
        {
          "param": "MILout_mirror",
          "operator": "==",
          "value": 1
        }
      ],
      "requireWhen": [
        {
          "param": "rpm",
          "operator": ">=",
          "value": 500
        }
      ],
      "logic": "AND",
      "duration": 5,
      "severity": "warning",
      "category": "fault"
    },
    {
      "id": "high-load-high-temp",
      "name": "High Load with Elevated Temperature",
      "description": "Engine running at high load with elevated coolant temperature",
      "enabled": true,
      "conditions": [
        {
          "param": "eng_load",
          "operator": ">",
          "value": 80
        },
        {
          "param": "ECT",
          "operator": ">",
          "value": 210
        }
      ],
      "logic": "AND",
      "duration": 30,
      "severity": "warning",
      "category": "thermal"
    },
    {
      "id": "lean-running",
      "name": "Lean Running Condition",
      "description": "Fuel trim indicating lean mixture under load",
      "enabled": true,
      "conditions": [
        {
          "param": "CL_BM1",
          "operator": ">",
          "value": 20
        },
        {
          "param": "eng_load",
          "operator": ">",
          "value": 50
        }
      ],
      "logic": "AND",
      "duration": 30,
      "severity": "warning",
      "category": "fuel"
    },
    {
      "id": "rich-running",
      "name": "Rich Running Condition",
      "description": "Fuel trim indicating rich mixture under load",
      "enabled": true,
      "conditions": [
        {
          "param": "CL_BM1",
          "operator": "<",
          "value": -20
        },
        {
          "param": "eng_load",
          "operator": ">",
          "value": 50
        }
      ],
      "logic": "AND",
      "duration": 30,
      "severity": "warning",
      "category": "fuel"
    },
    {
      "id": "tip-map-delta",
      "name": "TIP/MAP Delta",
      "description": "TIP / MAP Delta Pressure Issue - Possible Wastegate Adjustment Issue",
      "enabled": true,
      "conditions": [],
      "logic": "AND",
      "duration": 0,
      "severity": "warning",
      "category": "pressure",
      "type": "tip_map_delta",
      "config": {
        "fullLoadMapPsi": 31.3,
        "noLoadMapPsi": 2.2,
        "loadLimitPct": 87,
        "deltaIdealPsi": 3.5,
        "deltaHighPsi": 4.2,
        "deltaLowPsi": 2,
        "loadGate": {
          "param": "LoadLim_max",
          "operator": ">=",
          "value": null,
          "debounceSec": 3
        }
      },
      "requireWhen": [
        {
          "param": "EngineStable",
          "operator": "==",
          "value": 1
        },
        {
          "param": "EngineRunning",
          "operator": "==",
          "value": 1
        }
      ],
      "ignoreWhen": [
        {
          "param": "EngineStarting",
          "operator": "==",
          "value": 1
        }
      ]
    }
  ],
  "metadata": {
    "parameterMappings": {
      "battery": [
        "Vbat",
        "battery_voltage",
        "VBAT"
      ],
      "coolantTemp": [
        "ECT",
        "coolant_temp",
        "engine_coolant_temp"
      ],
      "oilPressure": [
        "OILP_press",
        "oil_pressure",
        "OIL_PRESS"
      ],
      "manifoldPressure": [
        "MAP",
        "manifold_pressure",
        "MANIFOLD_ABS_PRESS"
      ],
      "rpm": [
        "rpm",
        "RPM",
        "engine_speed",
        "ENGINE_SPEED"
      ],
      "fuelTrimCL": [
        "CL_BM1",
        "closed_loop_fuel",
        "CL_FUEL_TRIM"
      ],
      "fuelTrimAdaptive": [
        "A_BM1",
        "adaptive_fuel",
        "ADAPTIVE_FUEL_TRIM"
      ],
      "knock": [
        "KNK_retard",
        "knock_retard",
        "KNOCK_RETARD"
      ],
      "oilTemp": [
        "OILT",
        "oil_temp",
        "OIL_TEMP"
      ],
      "intakeAirTemp": [
        "IAT",
        "intake_air_temp",
        "INTAKE_AIR_TEMP"
      ]
    }
  }
}